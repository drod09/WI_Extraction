import os
import re

# === Folder to clean ===
target_folder = r"C:\Users\U309011\Desktop\CurrentPP"

# === Compile a regex to detect duplicates ===
pattern = re.compile(r"^(.*?)(_+\d+)(\.[^.]+)$", re.IGNORECASE)

# Track deletions
deleted = []

for file_name in os.listdir(target_folder):
    match = pattern.match(file_name)
    if match:
        base_name = match.group(1) + match.group(3)
        base_path = os.path.join(target_folder, base_name)
        dup_path = os.path.join(target_folder, file_name)

        # If the original file exists, delete the duplicate
        if os.path.exists(base_path):
            os.remove(dup_path)
            deleted.append(file_name)

print(f"âœ… Removed {len(deleted)} duplicate files:")
for f in deleted:
    print(f" - {f}")